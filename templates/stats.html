<!doctype html>
<html>
<head>
    <title>Model Statistics</title>
    <link rel="stylesheet" href="/templates/style.css" />
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Total Scores Chart
            const totalScoresData = {{.TotalScores | json}};
            const models = Object.keys(totalScoresData);
            const scores = Object.values(totalScoresData);

            new Chart(document.getElementById('totalScoresChart'), {
                type: 'bar',
                data: {
                    labels: models,
                    datasets: [{
                        label: 'Total Scores',
                        data: scores,
                        backgroundColor: 'rgba(54, 162, 235, 0.5)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    indexAxis: 'x',
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Total Score'
                            }
                        },
                        x: {
                            ticks: {
                                autoSkip: false,
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        });

        function getTierClass(score) {
            if (score >= 3000) return 'transcendent';
            if (score >= 2800) return 'super-grandmaster';
            if (score >= 2500) return 'grandmaster';
            if (score >= 2200) return 'international-master';
            if (score >= 2000) return 'master';
            if (score >= 1800) return 'expert';
            if (score >= 1500) return 'pro-player';
            if (score >= 1200) return 'advanced-player';
            if (score >= 1000) return 'intermediate-player';
            if (score >= 800) return 'veteran';
            return 'beginner';
        }
    </script>
    <style>
        .tier-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }
        .tier-table th, .tier-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .tier-header {
            font-weight: bold;
            text-transform: capitalize;
        }
        .tier-row:hover {
            background-color: #f5f5f5;
        }
        /* Tier color coding */
        .transcendent { background-color: hsl(270, 60%, 30%); color: white; }
        .super-grandmaster { background-color: hsl(270, 60%, 35%); color: white; }
        .grandmaster { background-color: hsl(260, 60%, 40%); color: white; }
        .international-master { background-color: hsl(250, 60%, 45%); color: white; }
        .master { background-color: hsl(240, 60%, 50%); color: white; }
        .expert { background-color: hsl(220, 70%, 55%); color: white; }
        .pro-player { background-color: hsl(200, 70%, 60%); color: black; }
        .advanced-player { background-color: hsl(180, 70%, 65%); color: black; }
        .intermediate-player { background-color: hsl(160, 70%, 70%); color: black; }
        .veteran { background-color: hsl(40, 70%, 75%); color: black; }
        .beginner { background-color: hsl(0, 70%, 80%); color: black; }
    </style>
</head>
<body>
    {{template "nav" .}}
    <div class="container">
        <h1>Model Performance Statistics</h1>
        
        <div class="tier-list">
            <h2>Tier List</h2>
            <table class="tier-table">
                <thead>
                    <tr>
                        <th>Tier</th>
                        <th>Score Range</th>
                        <th>Models</th>
                    </tr>
                </thead>
                <tbody>
                    {{range $tier := .OrderedTiers}}
                    {{with $models := index $.Tiers $tier}}
                    <tr class="tier-row {{$tier | tierClass}}">
                        <td class="tier-header">{{$tier | formatTierName}}</td>
                        <td>{{index $.TierRanges $tier}}</td>
                        <td>{{join $models ", "}}</td>
                    </tr>
                    {{end}}
                    {{end}}
                </tbody>
            </table>
        </div>

        <div class="chart-container">
            <h2>Total Scores</h2>
            <canvas id="totalScoresChart"></canvas>
        </div>
    </div>
</body>
</html>
